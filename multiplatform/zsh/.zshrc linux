# APPEND COMMON ZSHRC   #
#       LINUX           #

# enable homebrew
eval "$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)"

# enable starship prompt
eval "$(starship init zsh)"

# enable plugins

#   installed via pacman
# source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh
# source /usr/share/zsh/plugins/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

#   installed via brew
source /home/linuxbrew/.linuxbrew/opt/zsh-autosuggestions/share/zsh-autosuggestions/zsh-autosuggestions.zsh
source /home/linuxbrew/.linuxbrew/opt/zsh-syntax-highlighting/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh

# nvm (official way)
# export NVM_DIR="$HOME/.nvm"
# [ -s "$(brew --prefix nvm)/nvm.sh" ] && . "$(brew --prefix nvm)/nvm.sh"  # This loads nvm
# [ -s "$(brew --prefix nvm)/etc/bash_completion.d/nvm" ] && . "$(brew --prefix nvm)/etc/bash_completion.d/nvm"  # This loads nvm bash_completion

# npm (lazy nvm load on request)
lazynvm() {
  unset -f nvm node npm npx
  export NVM_DIR="$HOME/.nvm"
  [ -s "$(brew --prefix nvm)/nvm.sh" ] && . "$(brew --prefix nvm)/nvm.sh"
}
nvm() {
  lazynvm
  nvm "$@"
}
node() {
  lazynvm
  node "$@"
}
npm() {
  lazynvm
  npm "$@"
}
npx() {
  lazynvm
  npx "$@"
}